{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../src/context/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":53,"index":240}}],"key":"YFOiIQT6E6I699spMpMTUXmic+k=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":241},"end":{"line":5,"column":40,"index":281}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[2], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[4], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _srcContextAuthContext = require(_dependencyMap[6], \"../src/context/AuthContext\");\n  var _expoLinking = require(_dependencyMap[7], \"expo-linking\");\n  var Linking = _interopNamespace(_expoLinking);\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      processSessionId\n    } = (0, _srcContextAuthContext.useAuth)();\n    const hasProcessed = (0, _react.useRef)(false);\n    const params = (0, _expoRouter.useLocalSearchParams)();\n    (0, _react.useEffect)(() => {\n      const handleAuth = async () => {\n        if (hasProcessed.current) return;\n        hasProcessed.current = true;\n        try {\n          // Get the current URL to extract session_id from fragment\n          const url = await Linking.getInitialURL();\n          let sessionId = null;\n          if (url) {\n            // Extract session_id from URL fragment\n            const hashIndex = url.indexOf('#');\n            if (hashIndex !== -1) {\n              const fragment = url.substring(hashIndex + 1);\n              const params = new URLSearchParams(fragment);\n              sessionId = params.get('session_id');\n            }\n          }\n\n          // Also check URL params\n          if (!sessionId && params.session_id) {\n            sessionId = params.session_id;\n          }\n          if (sessionId) {\n            const success = await processSessionId(sessionId);\n            if (success) {\n              router.replace('/(tabs)/dashboard');\n            } else {\n              router.replace('/login');\n            }\n          } else {\n            router.replace('/login');\n          }\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/login');\n        }\n      };\n      handleAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: \"#1E3A5F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.text,\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      backgroundColor: '#FFFFFF'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16,\n      color: '#4B5563'\n    }\n  });\n});","lineCount":130,"map":[[28,2,7,15,"Object"],[28,8,7,15],[28,9,7,15,"defineProperty"],[28,23,7,15],[28,24,7,15,"exports"],[28,31,7,15],[29,4,7,15,"enumerable"],[29,14,7,15],[30,4,7,15,"get"],[30,7,7,15],[30,18,7,15,"get"],[30,19,7,15],[31,6,7,15],[31,13,7,15,"AuthCallback"],[31,25,7,15],[32,4,7,15],[33,2,7,15],[34,2,1,0],[34,6,1,0,"_react"],[34,12,1,0],[34,15,1,0,"require"],[34,22,1,0],[34,23,1,0,"_dependencyMap"],[34,37,1,0],[35,2,1,49],[35,6,1,49,"_reactNativeWebDistExportsView"],[35,36,1,49],[35,39,1,49,"require"],[35,46,1,49],[35,47,1,49,"_dependencyMap"],[35,61,1,49],[36,2,1,49],[36,6,1,49,"View"],[36,10,1,49],[36,13,1,49,"_interopDefault"],[36,28,1,49],[36,29,1,49,"_reactNativeWebDistExportsView"],[36,59,1,49],[37,2,1,49],[37,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[37,49,1,49],[37,52,1,49,"require"],[37,59,1,49],[37,60,1,49,"_dependencyMap"],[37,74,1,49],[38,2,1,49],[38,6,1,49,"ActivityIndicator"],[38,23,1,49],[38,26,1,49,"_interopDefault"],[38,41,1,49],[38,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[38,85,1,49],[39,2,1,49],[39,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[39,42,1,49],[39,45,1,49,"require"],[39,52,1,49],[39,53,1,49,"_dependencyMap"],[39,67,1,49],[40,2,1,49],[40,6,1,49,"StyleSheet"],[40,16,1,49],[40,19,1,49,"_interopDefault"],[40,34,1,49],[40,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[40,71,1,49],[41,2,1,49],[41,6,1,49,"_reactNativeWebDistExportsText"],[41,36,1,49],[41,39,1,49,"require"],[41,46,1,49],[41,47,1,49,"_dependencyMap"],[41,61,1,49],[42,2,1,49],[42,6,1,49,"Text"],[42,10,1,49],[42,13,1,49,"_interopDefault"],[42,28,1,49],[42,29,1,49,"_reactNativeWebDistExportsText"],[42,59,1,49],[43,2,3,0],[43,6,3,0,"_expoRouter"],[43,17,3,0],[43,20,3,0,"require"],[43,27,3,0],[43,28,3,0,"_dependencyMap"],[43,42,3,0],[44,2,4,0],[44,6,4,0,"_srcContextAuthContext"],[44,28,4,0],[44,31,4,0,"require"],[44,38,4,0],[44,39,4,0,"_dependencyMap"],[44,53,4,0],[45,2,5,0],[45,6,5,0,"_expoLinking"],[45,18,5,0],[45,21,5,0,"require"],[45,28,5,0],[45,29,5,0,"_dependencyMap"],[45,43,5,0],[46,2,5,0],[46,6,5,0,"Linking"],[46,13,5,0],[46,16,5,0,"_interopNamespace"],[46,33,5,0],[46,34,5,0,"_expoLinking"],[46,46,5,0],[47,2,5,40],[47,6,5,40,"_reactJsxDevRuntime"],[47,25,5,40],[47,28,5,40,"require"],[47,35,5,40],[47,36,5,40,"_dependencyMap"],[47,50,5,40],[48,2,7,15],[48,11,7,24,"AuthCallback"],[48,23,7,36,"AuthCallback"],[48,24,7,36],[48,26,7,39],[49,4,8,2],[49,10,8,8,"router"],[49,16,8,14],[49,19,8,17],[49,23,8,17,"useRouter"],[49,34,8,26],[49,35,8,26,"useRouter"],[49,44,8,26],[49,46,8,27],[49,47,8,28],[50,4,9,2],[50,10,9,8],[51,6,9,10,"processSessionId"],[52,4,9,27],[52,5,9,28],[52,8,9,31],[52,12,9,31,"useAuth"],[52,34,9,38],[52,35,9,38,"useAuth"],[52,42,9,38],[52,44,9,39],[52,45,9,40],[53,4,10,2],[53,10,10,8,"hasProcessed"],[53,22,10,20],[53,25,10,23],[53,29,10,23,"useRef"],[53,35,10,29],[53,36,10,29,"useRef"],[53,42,10,29],[53,44,10,30],[53,49,10,35],[53,50,10,36],[54,4,11,2],[54,10,11,8,"params"],[54,16,11,14],[54,19,11,17],[54,23,11,17,"useLocalSearchParams"],[54,34,11,37],[54,35,11,37,"useLocalSearchParams"],[54,55,11,37],[54,57,11,38],[54,58,11,39],[55,4,13,2],[55,8,13,2,"useEffect"],[55,14,13,11],[55,15,13,11,"useEffect"],[55,24,13,11],[55,26,13,12],[55,32,13,18],[56,6,14,4],[56,12,14,10,"handleAuth"],[56,22,14,20],[56,25,14,23],[56,31,14,23,"handleAuth"],[56,32,14,23],[56,37,14,35],[57,8,15,6],[57,12,15,10,"hasProcessed"],[57,24,15,22],[57,25,15,23,"current"],[57,32,15,30],[57,34,15,32],[58,8,16,6,"hasProcessed"],[58,20,16,18],[58,21,16,19,"current"],[58,28,16,26],[58,31,16,29],[58,35,16,33],[59,8,18,6],[59,12,18,10],[60,10,19,8],[61,10,20,8],[61,16,20,14,"url"],[61,19,20,17],[61,22,20,20],[61,28,20,26,"Linking"],[61,35,20,33],[61,36,20,34,"getInitialURL"],[61,49,20,47],[61,50,20,48],[61,51,20,49],[62,10,21,8],[62,14,21,12,"sessionId"],[62,23,21,21],[62,26,21,24],[62,30,21,28],[63,10,23,8],[63,14,23,12,"url"],[63,17,23,15],[63,19,23,17],[64,12,24,10],[65,12,25,10],[65,18,25,16,"hashIndex"],[65,27,25,25],[65,30,25,28,"url"],[65,33,25,31],[65,34,25,32,"indexOf"],[65,41,25,39],[65,42,25,40],[65,45,25,43],[65,46,25,44],[66,12,26,10],[66,16,26,14,"hashIndex"],[66,25,26,23],[66,30,26,28],[66,31,26,29],[66,32,26,30],[66,34,26,32],[67,14,27,12],[67,20,27,18,"fragment"],[67,28,27,26],[67,31,27,29,"url"],[67,34,27,32],[67,35,27,33,"substring"],[67,44,27,42],[67,45,27,43,"hashIndex"],[67,54,27,52],[67,57,27,55],[67,58,27,56],[67,59,27,57],[68,14,28,12],[68,20,28,18,"params"],[68,26,28,24],[68,29,28,27],[68,33,28,31,"URLSearchParams"],[68,48,28,46],[68,49,28,47,"fragment"],[68,57,28,55],[68,58,28,56],[69,14,29,12,"sessionId"],[69,23,29,21],[69,26,29,24,"params"],[69,32,29,30],[69,33,29,31,"get"],[69,36,29,34],[69,37,29,35],[69,49,29,47],[69,50,29,48],[70,12,30,10],[71,10,31,8],[73,10,33,8],[74,10,34,8],[74,14,34,12],[74,15,34,13,"sessionId"],[74,24,34,22],[74,28,34,26,"params"],[74,34,34,32],[74,35,34,33,"session_id"],[74,45,34,43],[74,47,34,45],[75,12,35,10,"sessionId"],[75,21,35,19],[75,24,35,22,"params"],[75,30,35,28],[75,31,35,29,"session_id"],[75,41,35,49],[76,10,36,8],[77,10,38,8],[77,14,38,12,"sessionId"],[77,23,38,21],[77,25,38,23],[78,12,39,10],[78,18,39,16,"success"],[78,25,39,23],[78,28,39,26],[78,34,39,32,"processSessionId"],[78,50,39,48],[78,51,39,49,"sessionId"],[78,60,39,58],[78,61,39,59],[79,12,40,10],[79,16,40,14,"success"],[79,23,40,21],[79,25,40,23],[80,14,41,12,"router"],[80,20,41,18],[80,21,41,19,"replace"],[80,28,41,26],[80,29,41,27],[80,48,41,46],[80,49,41,47],[81,12,42,10],[81,13,42,11],[81,19,42,17],[82,14,43,12,"router"],[82,20,43,18],[82,21,43,19,"replace"],[82,28,43,26],[82,29,43,27],[82,37,43,35],[82,38,43,36],[83,12,44,10],[84,10,45,8],[84,11,45,9],[84,17,45,15],[85,12,46,10,"router"],[85,18,46,16],[85,19,46,17,"replace"],[85,26,46,24],[85,27,46,25],[85,35,46,33],[85,36,46,34],[86,10,47,8],[87,8,48,6],[87,9,48,7],[87,10,48,8],[87,17,48,15,"error"],[87,22,48,20],[87,24,48,22],[88,10,49,8,"console"],[88,17,49,15],[88,18,49,16,"error"],[88,23,49,21],[88,24,49,22],[88,46,49,44],[88,48,49,46,"error"],[88,53,49,51],[88,54,49,52],[89,10,50,8,"router"],[89,16,50,14],[89,17,50,15,"replace"],[89,24,50,22],[89,25,50,23],[89,33,50,31],[89,34,50,32],[90,8,51,6],[91,6,52,4],[91,7,52,5],[92,6,54,4,"handleAuth"],[92,16,54,14],[92,17,54,15],[92,18,54,16],[93,4,55,2],[93,5,55,3],[93,7,55,5],[93,9,55,7],[93,10,55,8],[94,4,57,2],[94,24,58,4],[94,28,58,4,"_reactJsxDevRuntime"],[94,47,58,4],[94,48,58,4,"jsxDEV"],[94,54,58,4],[94,56,58,5,"View"],[94,60,58,9],[94,61,58,9,"default"],[94,68,58,9],[95,6,58,10,"style"],[95,11,58,15],[95,13,58,17,"styles"],[95,19,58,23],[95,20,58,24,"container"],[95,29,58,34],[96,6,58,34,"children"],[96,14,58,34],[96,30,59,6],[96,34,59,6,"_reactJsxDevRuntime"],[96,53,59,6],[96,54,59,6,"jsxDEV"],[96,60,59,6],[96,62,59,7,"ActivityIndicator"],[96,79,59,24],[96,80,59,24,"default"],[96,87,59,24],[97,8,59,25,"size"],[97,12,59,29],[97,14,59,30],[97,21,59,37],[98,8,59,38,"color"],[98,13,59,43],[98,15,59,44],[99,6,59,53],[100,8,59,53,"fileName"],[100,16,59,53],[100,18,59,53,"_jsxFileName"],[100,30,59,53],[101,8,59,53,"lineNumber"],[101,18,59,53],[102,8,59,53,"columnNumber"],[102,20,59,53],[103,6,59,53],[103,13,59,55],[103,14,59,56],[103,29,60,6],[103,33,60,6,"_reactJsxDevRuntime"],[103,52,60,6],[103,53,60,6,"jsxDEV"],[103,59,60,6],[103,61,60,7,"Text"],[103,65,60,11],[103,66,60,11,"default"],[103,73,60,11],[104,8,60,12,"style"],[104,13,60,17],[104,15,60,19,"styles"],[104,21,60,25],[104,22,60,26,"text"],[104,26,60,31],[105,8,60,31,"children"],[105,16,60,31],[105,18,60,32],[106,6,60,49],[107,8,60,49,"fileName"],[107,16,60,49],[107,18,60,49,"_jsxFileName"],[107,30,60,49],[108,8,60,49,"lineNumber"],[108,18,60,49],[109,8,60,49,"columnNumber"],[109,20,60,49],[110,6,60,49],[110,13,60,55],[110,14,60,56],[111,4,60,56],[112,6,60,56,"fileName"],[112,14,60,56],[112,16,60,56,"_jsxFileName"],[112,28,60,56],[113,6,60,56,"lineNumber"],[113,16,60,56],[114,6,60,56,"columnNumber"],[114,18,60,56],[115,4,60,56],[115,11,61,10],[115,12,61,11],[116,2,63,0],[117,2,65,0],[117,8,65,6,"styles"],[117,14,65,12],[117,17,65,15,"StyleSheet"],[117,27,65,25],[117,28,65,25,"default"],[117,35,65,25],[117,36,65,26,"create"],[117,42,65,32],[117,43,65,33],[118,4,66,2,"container"],[118,13,66,11],[118,15,66,13],[119,6,67,4,"flex"],[119,10,67,8],[119,12,67,10],[119,13,67,11],[120,6,68,4,"justifyContent"],[120,20,68,18],[120,22,68,20],[120,30,68,28],[121,6,69,4,"alignItems"],[121,16,69,14],[121,18,69,16],[121,26,69,24],[122,6,70,4,"backgroundColor"],[122,21,70,19],[122,23,70,21],[123,4,71,2],[123,5,71,3],[124,4,72,2,"text"],[124,8,72,6],[124,10,72,8],[125,6,73,4,"marginTop"],[125,15,73,13],[125,17,73,15],[125,19,73,17],[126,6,74,4,"fontSize"],[126,14,74,12],[126,16,74,14],[126,18,74,16],[127,6,75,4,"color"],[127,11,75,9],[127,13,75,11],[128,4,76,2],[129,2,77,0],[129,3,77,1],[129,4,77,2],[130,0,77,3],[130,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","handleAuth"],"mappings":"AAA;eCM;YCM;uBCC;KDsC;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}