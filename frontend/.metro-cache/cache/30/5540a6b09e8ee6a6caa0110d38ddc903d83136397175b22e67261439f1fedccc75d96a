{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":198},"end":{"line":4,"column":38,"index":236}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  var _servicesApi = require(_dependencyMap[3], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const checkAuth = async () => {\n      try {\n        setIsLoading(true);\n        const token = await AsyncStorage.default.getItem('session_token');\n        if (token) {\n          const response = await _servicesApi.api.get('/auth/me', {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('session_token');\n        setUser(null);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        setIsLoading(true);\n        // For now, we use Google OAuth, so this is a placeholder\n        return false;\n      } catch (error) {\n        console.error('Login error:', error);\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const processSessionId = async sessionId => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.api.post('/auth/session', {\n          session_id: sessionId\n        });\n        const {\n          user: userData,\n          session_token\n        } = response.data;\n        await AsyncStorage.default.setItem('session_token', session_token);\n        setUser(userData);\n        return true;\n      } catch (error) {\n        console.error('Process session error:', error);\n\n        // Handle specific error cases\n        if (error.response?.status === 403) {\n          const message = error.response?.data?.detail || 'Your account is not registered as an active tenant. Please contact the dormitory administrator.';\n          Alert.default.alert('Access Denied', message);\n        } else if (error.response?.status === 401) {\n          Alert.default.alert('Authentication Failed', 'Invalid session. Please try logging in again.');\n        } else {\n          Alert.default.alert('Error', 'Unable to sign in. Please try again later.');\n        }\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('session_token');\n        if (token) {\n          await _servicesApi.api.post('/auth/logout', {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n      } catch (error) {\n        console.error('Logout error:', error);\n      } finally {\n        await AsyncStorage.default.removeItem('session_token');\n        setUser(null);\n      }\n    };\n    const updateUser = data => {\n      if (user) {\n        setUser(Object.assign({}, user, data));\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        login,\n        logout,\n        checkAuth,\n        processSessionId,\n        updateUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"hJ9EEPhYWvr18jCXlmlRk12Anaw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":145,"map":[[15,2,28,0,"exports"],[15,9,28,0],[15,10,28,0,"AuthProvider"],[15,22,28,0],[15,25,28,0,"AuthProvider"],[15,37,28,0],[16,2,131,0,"exports"],[16,9,131,0],[16,10,131,0,"useAuth"],[16,17,131,0],[16,20,131,0,"useAuth"],[16,27,131,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,2,69],[20,6,2,69,"_reactNativeWebDistExportsAlert"],[20,37,2,69],[20,40,2,69,"require"],[20,47,2,69],[20,48,2,69,"_dependencyMap"],[20,62,2,69],[21,2,2,69],[21,6,2,69,"Alert"],[21,11,2,69],[21,14,2,69,"_interopDefault"],[21,29,2,69],[21,30,2,69,"_reactNativeWebDistExportsAlert"],[21,61,2,69],[22,2,4,0],[22,6,4,0,"_servicesApi"],[22,18,4,0],[22,21,4,0,"require"],[22,28,4,0],[22,29,4,0,"_dependencyMap"],[22,43,4,0],[23,2,4,38],[23,6,4,38,"_reactJsxDevRuntime"],[23,25,4,38],[23,28,4,38,"require"],[23,35,4,38],[23,36,4,38,"_dependencyMap"],[23,50,4,38],[24,2,26,0],[24,8,26,6,"AuthContext"],[24,19,26,17],[24,35,26,20],[24,39,26,20,"createContext"],[24,45,26,33],[24,46,26,33,"createContext"],[24,59,26,33],[24,61,26,63,"undefined"],[24,70,26,72],[24,71,26,73],[25,2,28,7],[25,11,28,16,"AuthProvider"],[25,23,28,28,"AuthProvider"],[25,24,28,29],[26,4,28,31,"children"],[27,2,28,65],[27,3,28,66],[27,5,28,68],[28,4,28,68,"_s"],[28,6,28,68],[29,4,29,2],[29,10,29,8],[29,11,29,9,"user"],[29,15,29,13],[29,17,29,15,"setUser"],[29,24,29,22],[29,25,29,23],[29,28,29,26],[29,32,29,26,"useState"],[29,38,29,34],[29,39,29,34,"useState"],[29,47,29,34],[29,49,29,48],[29,53,29,52],[29,54,29,53],[30,4,30,2],[30,10,30,8],[30,11,30,9,"isLoading"],[30,20,30,18],[30,22,30,20,"setIsLoading"],[30,34,30,32],[30,35,30,33],[30,38,30,36],[30,42,30,36,"useState"],[30,48,30,44],[30,49,30,44,"useState"],[30,57,30,44],[30,59,30,45],[30,63,30,49],[30,64,30,50],[31,4,32,2],[31,10,32,8,"checkAuth"],[31,19,32,17],[31,22,32,20],[31,28,32,20,"checkAuth"],[31,29,32,20],[31,34,32,32],[32,6,33,4],[32,10,33,8],[33,8,34,6,"setIsLoading"],[33,20,34,18],[33,21,34,19],[33,25,34,23],[33,26,34,24],[34,8,35,6],[34,14,35,12,"token"],[34,19,35,17],[34,22,35,20],[34,28,35,26,"AsyncStorage"],[34,40,35,38],[34,41,35,38,"default"],[34,48,35,38],[34,49,35,39,"getItem"],[34,56,35,46],[34,57,35,47],[34,72,35,62],[34,73,35,63],[35,8,36,6],[35,12,36,10,"token"],[35,17,36,15],[35,19,36,17],[36,10,37,8],[36,16,37,14,"response"],[36,24,37,22],[36,27,37,25],[36,33,37,31,"api"],[36,45,37,34],[36,46,37,34,"api"],[36,49,37,34],[36,50,37,35,"get"],[36,53,37,38],[36,54,37,39],[36,64,37,49],[36,66,37,51],[37,12,38,10,"headers"],[37,19,38,17],[37,21,38,19],[38,14,38,21,"Authorization"],[38,27,38,34],[38,29,38,36],[38,39,38,46,"token"],[38,44,38,51],[39,12,38,54],[40,10,39,8],[40,11,39,9],[40,12,39,10],[41,10,40,8,"setUser"],[41,17,40,15],[41,18,40,16,"response"],[41,26,40,24],[41,27,40,25,"data"],[41,31,40,29],[41,32,40,30],[42,8,41,6],[43,6,42,4],[43,7,42,5],[43,8,42,6],[43,15,42,13,"error"],[43,20,42,18],[43,22,42,20],[44,8,43,6,"console"],[44,15,43,13],[44,16,43,14,"log"],[44,19,43,17],[44,20,43,18],[44,40,43,38],[44,42,43,40,"error"],[44,47,43,45],[44,48,43,46],[45,8,44,6],[45,14,44,12,"AsyncStorage"],[45,26,44,24],[45,27,44,24,"default"],[45,34,44,24],[45,35,44,25,"removeItem"],[45,45,44,35],[45,46,44,36],[45,61,44,51],[45,62,44,52],[46,8,45,6,"setUser"],[46,15,45,13],[46,16,45,14],[46,20,45,18],[46,21,45,19],[47,6,46,4],[47,7,46,5],[47,16,46,14],[48,8,47,6,"setIsLoading"],[48,20,47,18],[48,21,47,19],[48,26,47,24],[48,27,47,25],[49,6,48,4],[50,4,49,2],[50,5,49,3],[51,4,51,2],[51,10,51,8,"login"],[51,15,51,13],[51,18,51,16],[51,24,51,16,"login"],[51,25,51,23,"email"],[51,30,51,36],[51,32,51,38,"password"],[51,40,51,54],[51,45,51,77],[52,6,52,4],[52,10,52,8],[53,8,53,6,"setIsLoading"],[53,20,53,18],[53,21,53,19],[53,25,53,23],[53,26,53,24],[54,8,54,6],[55,8,55,6],[55,15,55,13],[55,20,55,18],[56,6,56,4],[56,7,56,5],[56,8,56,6],[56,15,56,13,"error"],[56,20,56,18],[56,22,56,20],[57,8,57,6,"console"],[57,15,57,13],[57,16,57,14,"error"],[57,21,57,19],[57,22,57,20],[57,36,57,34],[57,38,57,36,"error"],[57,43,57,41],[57,44,57,42],[58,8,58,6],[58,15,58,13],[58,20,58,18],[59,6,59,4],[59,7,59,5],[59,16,59,14],[60,8,60,6,"setIsLoading"],[60,20,60,18],[60,21,60,19],[60,26,60,24],[60,27,60,25],[61,6,61,4],[62,4,62,2],[62,5,62,3],[63,4,64,2],[63,10,64,8,"processSessionId"],[63,26,64,24],[63,29,64,27],[63,35,64,34,"sessionId"],[63,44,64,51],[63,48,64,74],[64,6,65,4],[64,10,65,8],[65,8,66,6,"setIsLoading"],[65,20,66,18],[65,21,66,19],[65,25,66,23],[65,26,66,24],[66,8,67,6],[66,14,67,12,"response"],[66,22,67,20],[66,25,67,23],[66,31,67,29,"api"],[66,43,67,32],[66,44,67,32,"api"],[66,47,67,32],[66,48,67,33,"post"],[66,52,67,37],[66,53,67,38],[66,68,67,53],[66,70,67,55],[67,10,67,57,"session_id"],[67,20,67,67],[67,22,67,69,"sessionId"],[68,8,67,79],[68,9,67,80],[68,10,67,81],[69,8,68,6],[69,14,68,12],[70,10,68,14,"user"],[70,14,68,18],[70,16,68,20,"userData"],[70,24,68,28],[71,10,68,30,"session_token"],[72,8,68,44],[72,9,68,45],[72,12,68,48,"response"],[72,20,68,56],[72,21,68,57,"data"],[72,25,68,61],[73,8,70,6],[73,14,70,12,"AsyncStorage"],[73,26,70,24],[73,27,70,24,"default"],[73,34,70,24],[73,35,70,25,"setItem"],[73,42,70,32],[73,43,70,33],[73,58,70,48],[73,60,70,50,"session_token"],[73,73,70,63],[73,74,70,64],[74,8,71,6,"setUser"],[74,15,71,13],[74,16,71,14,"userData"],[74,24,71,22],[74,25,71,23],[75,8,72,6],[75,15,72,13],[75,19,72,17],[76,6,73,4],[76,7,73,5],[76,8,73,6],[76,15,73,13,"error"],[76,20,73,23],[76,22,73,25],[77,8,74,6,"console"],[77,15,74,13],[77,16,74,14,"error"],[77,21,74,19],[77,22,74,20],[77,46,74,44],[77,48,74,46,"error"],[77,53,74,51],[77,54,74,52],[79,8,76,6],[80,8,77,6],[80,12,77,10,"error"],[80,17,77,15],[80,18,77,16,"response"],[80,26,77,24],[80,28,77,26,"status"],[80,34,77,32],[80,39,77,37],[80,42,77,40],[80,44,77,42],[81,10,78,8],[81,16,78,14,"message"],[81,23,78,21],[81,26,78,24,"error"],[81,31,78,29],[81,32,78,30,"response"],[81,40,78,38],[81,42,78,40,"data"],[81,46,78,44],[81,48,78,46,"detail"],[81,54,78,52],[81,58,79,10],[81,155,79,107],[82,10,80,8,"Alert"],[82,15,80,13],[82,16,80,13,"default"],[82,23,80,13],[82,24,80,14,"alert"],[82,29,80,19],[82,30,80,20],[82,45,80,35],[82,47,80,37,"message"],[82,54,80,44],[82,55,80,45],[83,8,81,6],[83,9,81,7],[83,15,81,13],[83,19,81,17,"error"],[83,24,81,22],[83,25,81,23,"response"],[83,33,81,31],[83,35,81,33,"status"],[83,41,81,39],[83,46,81,44],[83,49,81,47],[83,51,81,49],[84,10,82,8,"Alert"],[84,15,82,13],[84,16,82,13,"default"],[84,23,82,13],[84,24,82,14,"alert"],[84,29,82,19],[84,30,82,20],[84,53,82,43],[84,55,82,45],[84,102,82,92],[84,103,82,93],[85,8,83,6],[85,9,83,7],[85,15,83,13],[86,10,84,8,"Alert"],[86,15,84,13],[86,16,84,13,"default"],[86,23,84,13],[86,24,84,14,"alert"],[86,29,84,19],[86,30,84,20],[86,37,84,27],[86,39,84,29],[86,83,84,73],[86,84,84,74],[87,8,85,6],[88,8,86,6],[88,15,86,13],[88,20,86,18],[89,6,87,4],[89,7,87,5],[89,16,87,14],[90,8,88,6,"setIsLoading"],[90,20,88,18],[90,21,88,19],[90,26,88,24],[90,27,88,25],[91,6,89,4],[92,4,90,2],[92,5,90,3],[93,4,92,2],[93,10,92,8,"logout"],[93,16,92,14],[93,19,92,17],[93,25,92,17,"logout"],[93,26,92,17],[93,31,92,29],[94,6,93,4],[94,10,93,8],[95,8,94,6],[95,14,94,12,"token"],[95,19,94,17],[95,22,94,20],[95,28,94,26,"AsyncStorage"],[95,40,94,38],[95,41,94,38,"default"],[95,48,94,38],[95,49,94,39,"getItem"],[95,56,94,46],[95,57,94,47],[95,72,94,62],[95,73,94,63],[96,8,95,6],[96,12,95,10,"token"],[96,17,95,15],[96,19,95,17],[97,10,96,8],[97,16,96,14,"api"],[97,28,96,17],[97,29,96,17,"api"],[97,32,96,17],[97,33,96,18,"post"],[97,37,96,22],[97,38,96,23],[97,52,96,37],[97,54,96,39],[97,55,96,40],[97,56,96,41],[97,58,96,43],[98,12,97,10,"headers"],[98,19,97,17],[98,21,97,19],[99,14,97,21,"Authorization"],[99,27,97,34],[99,29,97,36],[99,39,97,46,"token"],[99,44,97,51],[100,12,97,54],[101,10,98,8],[101,11,98,9],[101,12,98,10],[102,8,99,6],[103,6,100,4],[103,7,100,5],[103,8,100,6],[103,15,100,13,"error"],[103,20,100,18],[103,22,100,20],[104,8,101,6,"console"],[104,15,101,13],[104,16,101,14,"error"],[104,21,101,19],[104,22,101,20],[104,37,101,35],[104,39,101,37,"error"],[104,44,101,42],[104,45,101,43],[105,6,102,4],[105,7,102,5],[105,16,102,14],[106,8,103,6],[106,14,103,12,"AsyncStorage"],[106,26,103,24],[106,27,103,24,"default"],[106,34,103,24],[106,35,103,25,"removeItem"],[106,45,103,35],[106,46,103,36],[106,61,103,51],[106,62,103,52],[107,8,104,6,"setUser"],[107,15,104,13],[107,16,104,14],[107,20,104,18],[107,21,104,19],[108,6,105,4],[109,4,106,2],[109,5,106,3],[110,4,108,2],[110,10,108,8,"updateUser"],[110,20,108,18],[110,23,108,22,"data"],[110,27,108,41],[110,31,108,46],[111,6,109,4],[111,10,109,8,"user"],[111,14,109,12],[111,16,109,14],[112,8,110,6,"setUser"],[112,15,110,13],[112,16,110,13,"Object"],[112,22,110,13],[112,23,110,13,"assign"],[112,29,110,13],[112,34,110,19,"user"],[112,38,110,23],[112,40,110,28,"data"],[112,44,110,32],[112,45,110,34],[112,46,110,35],[113,6,111,4],[114,4,112,2],[114,5,112,3],[115,4,114,2],[115,24,115,4],[115,28,115,4,"_reactJsxDevRuntime"],[115,47,115,4],[115,48,115,4,"jsxDEV"],[115,54,115,4],[115,56,115,5,"AuthContext"],[115,67,115,16],[115,68,115,17,"Provider"],[115,76,115,25],[116,6,116,6,"value"],[116,11,116,11],[116,13,116,13],[117,8,117,8,"user"],[117,12,117,12],[118,8,118,8,"isLoading"],[118,17,118,17],[119,8,119,8,"login"],[119,13,119,13],[120,8,120,8,"logout"],[120,14,120,14],[121,8,121,8,"checkAuth"],[121,17,121,17],[122,8,122,8,"processSessionId"],[122,24,122,24],[123,8,123,8,"updateUser"],[124,6,124,6],[124,7,124,8],[125,6,124,8,"children"],[125,14,124,8],[125,16,126,7,"children"],[126,4,126,15],[127,6,126,15,"fileName"],[127,14,126,15],[127,16,126,15,"_jsxFileName"],[127,28,126,15],[128,6,126,15,"lineNumber"],[128,16,126,15],[129,6,126,15,"columnNumber"],[129,18,126,15],[130,4,126,15],[130,11,127,26],[130,12,127,27],[131,2,129,0],[132,2,129,1,"_s"],[132,4,129,1],[132,5,28,16,"AuthProvider"],[132,17,28,28],[133,2,28,28,"_c"],[133,4,28,28],[133,7,28,16,"AuthProvider"],[133,19,28,28],[134,2,131,7],[134,11,131,16,"useAuth"],[134,18,131,23,"useAuth"],[134,19,131,23],[134,21,131,26],[135,4,131,26,"_s2"],[135,7,131,26],[136,4,132,2],[136,10,132,8,"context"],[136,17,132,15],[136,20,132,18],[136,24,132,18,"useContext"],[136,30,132,28],[136,31,132,28,"useContext"],[136,41,132,28],[136,43,132,29,"AuthContext"],[136,54,132,40],[136,55,132,41],[137,4,133,2],[137,8,133,6,"context"],[137,15,133,13],[137,20,133,18,"undefined"],[137,29,133,27],[137,31,133,29],[138,6,134,4],[138,12,134,10],[138,16,134,14,"Error"],[138,21,134,19],[138,22,134,20],[138,67,134,65],[138,68,134,66],[139,4,135,2],[140,4,136,2],[140,11,136,9,"context"],[140,18,136,16],[141,2,137,0],[142,2,137,1,"_s2"],[142,5,137,1],[142,6,131,16,"useAuth"],[142,13,131,23],[143,2,131,23],[143,6,131,23,"_c"],[143,8,131,23],[144,2,131,23,"$RefreshReg$"],[144,14,131,23],[144,15,131,23,"_c"],[144,17,131,23],[145,0,131,23],[145,3]],"functionMap":{"names":["<global>","AuthProvider","checkAuth","login","processSessionId","logout","updateUser","useAuth"],"mappings":"AAA;OC2B;oBCI;GDiB;gBEE;GFW;2BGE;GH0B;iBIE;GJc;qBKE;GLI;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}